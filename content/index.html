---
title: Urban Sketchers in Deutschland
---

<hgroup>
  <h1><span>Urban</span><span>Sketchers</span></h1>
  <p>in Deutschland</p>
</hgroup>

<p>Urban Sketchers freuen sich über Besuch und neue Gesichter. Bei Interesse melde dich einfach bei einer Gruppe in deiner Nähe und schau bei einem Treffen vorbei!</p>

<div class="browse-layout">
  <div class="search-filters">
    <input type="search" id="city-search" placeholder="Stadt suchen…" autocomplete="off" autofocus>
    <div class="filters">
      <div class="segmented-control" id="official-filter">
        <label><input type="radio" name="official" value="all" checked> Alle</label>
        <label><input type="radio" name="official" value="official"> Offiziell</label>
        <label><input type="radio" name="official" value="unofficial"> Inoffiziell</label>
      </div>
      <label class="filter-chip"><input type="checkbox" value="website"><svg width="16" height="16"><use href="#icon-website"></use></svg> Website</label>
      <label class="filter-chip"><input type="checkbox" value="email"><svg width="16" height="16"><use href="#icon-email"></use></svg> Email</label>
      <label class="filter-chip"><input type="checkbox" value="facebook"><svg width="16" height="16"><use href="#icon-facebook"></use></svg> Facebook</label>
      <label class="filter-chip"><input type="checkbox" value="instagram"><svg width="16" height="16"><use href="#icon-instagram"></use></svg> Instagram</label>
      <label class="filter-chip"><input type="checkbox" value="bluesky"><svg width="16" height="16"><use href="#icon-bluesky"></use></svg> Bluesky</label>
      <label class="filter-chip"><input type="checkbox" value="whatsapp"><svg width="16" height="16"><use href="#icon-whatsapp"></use></svg> WhatsApp</label>
    </div>
  </div>
  <div class="browse-map">
    <div id="map"></div>
  </div>
  <div class="browse-list">
    <div class="cities">
<% @items.find_all('/cities/*').sort_by { |c| c[:city] }.each do |city| %>
<%
  slug = city[:city].downcase
    .gsub(/[äÄ]/, 'ae').gsub(/[öÖ]/, 'oe').gsub(/[üÜ]/, 'ue').gsub(/ß/, 'ss')
    .gsub(/[^a-z0-9]+/, '-').gsub(/^-|-$/, '')
%>
<article class="city-card" id="city-<%= slug %>" data-city="<%= city[:city].downcase %>" data-slug="<%= slug %>" data-official="<%= city[:is_official] ? '1' : '' %>" data-website="<%= city[:website] && !city[:website].empty? ? '1' : '' %>" data-email="<%= city[:email] && !city[:email].empty? ? '1' : '' %>" data-facebook="<%= city[:facebook] && !city[:facebook].empty? ? '1' : '' %>" data-instagram="<%= city[:instagram] && !city[:instagram].empty? ? '1' : '' %>" data-bluesky="<%= city[:bluesky] && !city[:bluesky].empty? ? '1' : '' %>" data-whatsapp="<%= city[:whatsapp] && !city[:whatsapp].empty? ? '1' : '' %>">
<% if city[:is_official] %><img src="/usk-logo.png" alt="Offizielles Chapter" class="official-badge"><% end %>
  <h3><%= city[:city] %></h3>
  <p class="description"><%= city[:description] %></p>
  <div class="social-links">
<% if city[:website] && !city[:website].empty? %>
    <a href="<%= city[:website].start_with?('http') ? city[:website] : 'https://' + city[:website] %>" class="btn btn-website" target="_blank" rel="noopener"><svg width="16" height="16"><use href="#icon-website"></use></svg> Website</a>
<% end %>
<% if city[:email] && !city[:email].empty? %>
<%   email_addr = city[:email] =~ /<(.+)>/ ? $1 : city[:email] %>
    <a href="mailto:<%= encode_email(email_addr) %>" class="btn btn-email"><svg width="16" height="16"><use href="#icon-email"></use></svg> E-Mail</a>
<% end %>
<% if city[:facebook] && !city[:facebook].empty? %>
    <a href="<%= city[:facebook] %>" class="btn btn-facebook" target="_blank" rel="noopener"><svg width="16" height="16"><use href="#icon-facebook"></use></svg> Facebook</a>
<% end %>
<% if city[:instagram] && !city[:instagram].empty? %>
    <a href="https://instagram.com/<%= city[:instagram].sub(/^@/, '') %>" class="btn btn-instagram" target="_blank" rel="noopener"><svg width="16" height="16"><use href="#icon-instagram"></use></svg> Instagram</a>
<% end %>
<% if city[:bluesky] && !city[:bluesky].empty? %>
    <a href="https://bsky.app/profile/<%= city[:bluesky].sub(/^@/, '') %>" class="btn btn-bluesky" target="_blank" rel="noopener"><svg width="16" height="16"><use href="#icon-bluesky"></use></svg> Bluesky</a>
<% end %>
<% if city[:whatsapp] && !city[:whatsapp].empty? %>
    <a href="<%= city[:whatsapp] %>" class="btn btn-whatsapp" target="_blank" rel="noopener"><svg width="16" height="16"><use href="#icon-whatsapp"></use></svg> WhatsApp</a>
<% end %>
  </div>
</article>
<% end %>
    </div>
  </div>
</div>

<script>
{
  const cities = [
<% @items.find_all('/cities/*').each do |city| %>
<% if city[:lat] && city[:lon] %>
<%
  slug = city[:city].downcase
    .gsub(/[äÄ]/, 'ae').gsub(/[öÖ]/, 'oe').gsub(/[üÜ]/, 'ue').gsub(/ß/, 'ss')
    .gsub(/[^a-z0-9]+/, '-').gsub(/^-|-$/, '')
  desc_escaped = (city[:description] || '').gsub('"', '&quot;').gsub("'", "&#39;")
  raw_email = city[:email] || ''
  email_addr = raw_email =~ /<(.+)>/ ? $1 : raw_email
  encoded_email = email_addr.empty? ? '' : encode_email(email_addr)
%>
    {
      name: "<%= city[:city] %>",
      lat: <%= city[:lat] %>,
      lon: <%= city[:lon] %>,
      slug: "<%= slug %>",
      description: "<%= desc_escaped %>",
      website: "<%= city[:website] || '' %>",
      email: "<%= encoded_email %>",
      facebook: "<%= city[:facebook] || '' %>",
      instagram: "<%= city[:instagram] || '' %>",
      bluesky: "<%= city[:bluesky] || '' %>",
      whatsapp: "<%= city[:whatsapp] || '' %>"
    },
<% end %>
<% end %>
  ];

  const createPopupContent = ({ name, description, website, email, facebook, instagram, bluesky, whatsapp }) => {
    const websiteUrl = website && (website.startsWith('http') ? website : 'https://' + website);
    const links = [
      website && `<a href="${websiteUrl}" class="popup-btn popup-web" target="_blank" rel="noopener">Website</a>`,
      email && `<a href="mailto:${email}" class="popup-btn popup-email">E-Mail</a>`,
      facebook && `<a href="${facebook}" class="popup-btn popup-fb" target="_blank" rel="noopener">Facebook</a>`,
      instagram && `<a href="https://instagram.com/${instagram.replace(/^@/, '')}" class="popup-btn popup-ig" target="_blank" rel="noopener">Instagram</a>`,
      bluesky && `<a href="https://bsky.app/profile/${bluesky.replace(/^@/, '')}" class="popup-btn popup-bs" target="_blank" rel="noopener">Bluesky</a>`,
      whatsapp && `<a href="${whatsapp}" class="popup-btn popup-wa" target="_blank" rel="noopener">WhatsApp</a>`
    ].filter(Boolean).join('');

    return `
      <div class="map-popup">
        <strong>${name}</strong>
        <p>${description}</p>
        <div class="popup-links">${links}</div>
      </div>
    `;
  };

  const map = L.map('map', { scrollWheelZoom: false });

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    maxZoom: 18
  }).addTo(map);

  const markers = new Map();

  for (const city of cities) {
    const marker = L.circleMarker([city.lat, city.lon], {
      radius: 12,
      fillColor: '#e85d04',
      color: '#1a1a1a',
      weight: 3,
      opacity: 1,
      fillOpacity: 0.9
    }).addTo(map);

    marker.bindPopup(createPopupContent(city), { maxWidth: 280 });
    markers.set(city.slug, marker);
  }

  if (cities.length > 0) {
    const bounds = L.latLngBounds(cities.map(({ lat, lon }) => [lat, lon]));
    map.fitBounds(bounds, { padding: [30, 30] });
  }

  const searchInput = document.getElementById('city-search');
  const filterCheckboxes = document.querySelectorAll('.filters input[type="checkbox"]');
  const officialRadios = document.querySelectorAll('#official-filter input[type="radio"]');

  const applyFilters = () => {
    const query = searchInput.value.toLowerCase();
    const activeFilters = [...filterCheckboxes].filter(cb => cb.checked).map(cb => cb.value);
    const officialFilter = document.querySelector('#official-filter input:checked')?.value || 'all';

    for (const card of document.querySelectorAll('.city-card')) {
      const matchesSearch = card.dataset.city.includes(query);
      const matchesFilters = activeFilters.length === 0 || activeFilters.every(f => card.dataset[f] === '1');
      const matchesOfficial = officialFilter === 'all' ||
        (officialFilter === 'official' && card.dataset.official === '1') ||
        (officialFilter === 'unofficial' && card.dataset.official !== '1');
      const matches = matchesSearch && matchesFilters && matchesOfficial;

      card.style.display = matches ? '' : 'none';

      const marker = markers.get(card.dataset.slug);
      marker?.setStyle({
        fillOpacity: matches ? 0.9 : 0.15,
        opacity: matches ? 1 : 0.3
      });
    }
  };

  searchInput.addEventListener('input', applyFilters);
  filterCheckboxes.forEach(cb => cb.addEventListener('change', applyFilters));
  officialRadios.forEach(r => r.addEventListener('change', applyFilters));

  for (const card of document.querySelectorAll('.city-card')) {
    card.style.cursor = 'pointer';

    card.addEventListener('click', (e) => {
      if (e.target.closest('a')) return;
      markers.get(card.dataset.slug)?.openPopup();
    });
  }
}
</script>
